# 经济仿真引擎

一个基于多代理人的宏观经济仿真平台，专为宏观经济学教学与实验设计。

## 项目概述

本引擎构建了一个离散时间下的多代理人经济仿真环境，允许学生通过编写或配置个体策略来参与、影响并观察虚拟经济的动态演化。系统支持约400个个人代理人、1个企业代理人、1个商业银行、1个央行和1个政府代理人的复杂经济交互。

## 核心特性

- **多代理人系统**: 支持异质性个体、企业、银行、央行和政府等多种经济主体
- **三大市场机制**: 商品市场、劳动力市场和金融市场的完整模拟
- **分层架构设计**: 策略层、代理人层、市场环境层和核心引擎层的清晰分离
- **时序化交互**: 每日三时刻（Tick）的精确时序控制
- **可观测性**: 完整的数据记录和可视化支持
- **LLM集成**: 支持大语言模型驱动的智能代理人策略

## 系统架构

### 四层架构设计

#### 第四层：策略/API层 (Strategy/API Layer)    
- Python脚本策略                          
- JSON配置文件                            
- LLM API集成                              

#### 第三层：代理人层 (Agent Layer)            
- 个人/家户 (~400个)                    
- 企业 (1个)                           
- 商业银行 (1个)                        
- 央行 (1个)                           
- 政府 (1个)                           

#### 第二层：市场与环境层 (Market Layer)       
- 商品市场                              
- 劳动力市场                            
- 金融市场                              
- 宏观数据中心  

#### 第一层：核心引擎层 (Core Engine Layer)   
- 主事件循环                            
- 时序调度器                            
- 规则执行官                            
- 数据记录器                            

### 时间机制

每个仿真日分为三个时刻（Tick）：

- **Tick 1 - 生产与分配阶段（早晨）**
  - 企业生产
  - 工资支付
  - 制定当日计划

- **Tick 2 - 交易与交互阶段（下午）**
  - 劳动力市场匹配
  - 商品市场交易
  - 金融市场操作

- **Tick 3 - 结算与更新阶段（夜晚）**
  - 市场结算
  - 状态更新
  - 宏观指标计算

## 代理人类型

### 个人/家户 (Household Agent)
- **状态**: 财务状况、消费偏好、人力资本
- **决策**: 消费、储蓄、劳动、教育投资
- **约束**: 预算约束、生存约束

### 企业 (Firm Agent)
- **状态**: 财务资产、库存、生产技术
- **决策**: 投资、融资、生产、定价、雇佣
- **约束**: 偿付能力约束、工资支付义务

### 央行 (Central Bank Agent)
- **状态**: 宏观经济感知、资产负债表、政策目标
- **决策**: 基准利率、法定准备金率、公开市场操作
- **使命**: 物价稳定、经济增长、金融稳定

### 商业银行 (Commercial Bank Agent)
- **状态**: 资产负债表、风险指标、政策环境
- **决策**: 存贷款利率、信贷审批、资产负债管理
- **约束**: 准备金要求、资本充足率、流动性要求

### 政府 (Government Agent)
- **状态**: 财政状况、债务状况、宏观经济感知
- **决策**: 税收政策、支出政策、国债发行
- **约束**: 预算约束、债务可持续性

## 市场机制

### 商品市场
- **结构**: 垄断市场（1个企业 vs ~400个个人）
- **流程**: 价格发布 → 需求提交 → 市场出清 → 结算

### 劳动力市场
- **结构**: 双寡头市场（企业+政府 vs ~400个个人）
- **流程**: 岗位发布 → 求职申请 → 匹配算法 → 合约签订

### 金融市场
- **存贷款市场**: 利率发布 → 存款处理 → 贷款申请 → 信贷审批 → 贷款发放
- **债券市场**: 债券发行 → 认购提交 → 分配结算

## 数据可见性

系统实现三层数据可见性架构：

- **层级 0**: 私有数据（agent_state）- 仅代理人自身可见
- **层级 1**: 公开市场数据（market_data）- 所有代理人可见
- **层级 2**: 系统数据 - 引擎全量数据，用于分析和可视化

## 设计原则

- **模块化**: 引擎核心与策略逻辑严格分离
- **可扩展性**: 支持新代理人类型和市场机制的添加
- **可观测性**: 完整的状态记录和可视化
- **确定性**: 相同条件下的可复现结果
